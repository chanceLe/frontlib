## 笔试题

### 字节异步加法

```js
/**
 * 请在 sum函数中调用此函数，完成数值计算
 * @param {*} a 要相加的第一个值
 * @param {*} b 要相加的第二个值
 * @param {*} callback 相加之后的回调函数
 */
function asyncAdd(a, b, callback) {
  setTimeout(function() {
    callback(null, a + b);
  }, 1000);
}

/**
 * 请在此方法中调用asyncAdd方法，完成数值计算
 * @param  {...any} rest 传入的参数
 */
async function sum(...rest) {
  let result = rest.shift();
  const obj = {};
  obj.toString = function() {
    return result;
  };
  const promises = [];
  for (let num of rest) {
    promises.push(
      new Promise(resolve => {
        asyncAdd(obj, num, (_, res) => {
          resolve(res);
        });
      }).then(res => {
        // 在这里将 result的值改变之后，obj.toString 的返回值就变了，这时候下一个setTimeout调用时就使用了新值
        result = res;
      }),
    );
  }
  await Promise.all(promises);
  return result;
}
let start = window.performance.now();
sum(1, 2, 3, 4, 5, 6).then(res => {
  // 请保证在调用sum方法之后，返回结果21
  console.log(res);
  console.log(`程序执行共耗时: ${window.performance.now() - start}`);
});
```

### 二维数组中最大几个连续 1

```js
const arr = [
  [1, 0, 1, 1, 0],
  [1, 0, 0],
  [0, 0, 1, 0, 1],
  [1, 0, 1, 0, 1],
  [1, 0, 1, 1],
];

function getNumber(arr, i, j) {
  let num = 1;
  arr[i][j] = 0;
  if (arr[i - 1] && arr[i - 1][j]) {
    //上边
    num += getNumber(arr, i - 1, j);
  }

  if (arr[i + 1] && arr[i + 1][j]) {
    //下边
    num += getNumber(arr, i + 1, j);
  }

  if (arr[i][j - 1]) {
    //左边
    num += getNumber(arr, i, j - 1);
  }

  if (arr[i][j + 1]) {
    //右边
    num += getNumber(arr, i, j + 1);
  }
  return num;
}
function getMax(arr) {
  let max = 0;
  for (let i = 0; i < arr.length; i++) {
    for (let j = 0; j < arr[i].length; j++) {
      const ele = arr[i][j];
      if (ele === 1) {
        const cur = getNumber(arr, i, j);
        cur > max && (max = cur);
      }
    }
  }
  return max;
}

const start = window.performance.now();
console.log(getMax(arr));
console.log('用时:', window.performance.now() - start);
```
